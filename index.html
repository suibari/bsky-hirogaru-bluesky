<!DOCTYPE html>
<meta charset="utf-8">

<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>

<link rel ="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<style>
    body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
    }
    #cy {
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        position: fixed;
        background: linear-gradient(-225deg, #2CD8D5 0%, #C5C1FF 56%, #FFBAC3 100%);
        z-index: 1;
    }
    #inputbuttonContainer {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 2;
    }
    #loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
    }
    .node-tooltip {
        position: absolute;
        background-color: white;
        padding: 10px;
        /* border: 1px solid black; */
        border-radius: 5px;
        z-index: 9999;
        display: none;
        line-height: 1.2; /* 行間を調整 */
        text-align: left; /* テキストを左揃え */
    }
    #shareButton {
        position: fixed;
        top: 10px;
        right: 10px;
        z-index: 9999;
        cursor: pointer;
    }
    #popupOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: none;
    }
    #popupContainer {
        overflow: hidden;
    }
    #popupShare {
        background-color: transparent;
        border: none;
        padding: 20px;
        max-width: 80%;
        max-height: 80%;
        overflow: hidden;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    #popupImageShare {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
    }
    #closeButtonShare {
        position: absolute;
        top: 5px;
        right: 5px;
        border: none;
        background-color: transparent;
        font-size: 20px;
        cursor: pointer;
    }
</style>
</head>

<body>

<div id="cy"></div>
<div id="inputbuttonContainer">
    <input type="text" id="fetchInput" placeholder="handle.bsky.social">
    <button id="fetchButton">Generate!</button>
</div>
<div id="shareButton" onclick="shareGraph()">   
    <i class="fas fa-share-alt"></i>
</div>
<div id="loading" style="display: none;"><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
<!-- Node Tooltip -->
<div id="nodeTooltip" class="node-tooltip">
    <div id="tooltipContent" class="text-center"></div>
    <button id="regenerateButton" class="btn btn-primary">この人を中心にグラフを再生成</button>
</div>
<!-- Share Popup -->
<div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <img id="popupImageShare" src="" class="img-fluid mb-3" alt="Share Image">
                <p>画像をコピーしてBlueskyにペーストすればシェアできます！</p>
            </div>
        </div>
    </div>
</div>  

<script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="client.js"></script>

</body>